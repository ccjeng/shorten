function makeRequest(){var e=$("#service").find(":selected").val(),o=$("#service").find(":selected").text();switch(ga("send","event","service","click",o,0),e){case"g":getGoogle();break;case"b":getBitly();break;case"t":getTinyURL();break;case"i":getIsgd();break;case"v":getVgd();break;default:Google()}}function getGoogle(){var e=$("#fullURL").val().toLowerCase(),o=gapi.client.urlshortener.url.insert({resource:{longUrl:e}});o.execute(function(e){if(isEmpty(e.id))$("#error").show(),$("#error").text("error: creating short url: goo.gl");else{var o=e.id;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}})}function getBitly(){var e="o_4qkhbs5vl0",o="R_3773937f1ac64e88ae4fe130d6356681",r=$("#fullURL").val().toLowerCase();$.ajax({url:"http://api.bit.ly/v3/shorten",data:{longUrl:r,apiKey:o,login:e},dataType:"jsonp",success:function(e){var o=e.data.url;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)},error:function(){$("#error").show(),$("#error").text("error: creating short url: bit.ly")}})}function getTinyURL(){var e=$("#fullURL").val().toLowerCase();$.getJSON("http://urltinyfy.appspot.com/tinyurl?url="+encodeURIComponent(e)+"&callback=?",function(e){var o=e.tinyurl;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}).fail(function(e,o,r){$("#error").show(),$("#error").text("error: creating short url: TinyURL")})}function getIsgd(){var e=$("#fullURL").val().toLowerCase();$.getJSON("http://urltinyfy.appspot.com/isgd?url="+encodeURIComponent(e)+"&callback=?",function(e){var o=e.tinyurl;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}).fail(function(e,o,r){$("#error").show(),$("#error").text("error: creating short url: is.gd")})}function getVgd(){var e=$("#fullURL").val().toLowerCase();$.getJSON("http://urltinyfy.appspot.com/vgd?url="+encodeURIComponent(e)+"&callback=?",function(e){var o=e.tinyurl;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}).fail(function(e,o,r){$("#error").show(),$("#error").text("error: creating short url: v.gd")})}function load(){$("#error").hide(),$("#error").addClass("isa_error"),$("#click-to-copy").hide(),gapi.client.setApiKey("AIzaSyAFPETEhOLJGMLUq9Ql_o3lyJtvJ5IUaqo"),gapi.client.load("urlshortener","v1",function(){})}function get_QRCode(e){var o=120;isEmpty(e)||jQuery("#qrcode").qrcode({width:o,height:o,text:e})}function isUrl(e){var o="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$",r=new RegExp(o);return r.test(e)}function isEmpty(e){return!e||0===e.length}$(document).ready(function(){$("form").submit(function(e){e.preventDefault();{var o=$("#fullURL").val().toLowerCase();$("#shortenURL").val(),$("#service").find(":selected").val()}$("#error").text(""),$("#shortenURL").text(""),$("#qrcode").text(""),isUrl(o)?($("#form").removeClass("has-error").addClass("has-success"),$(".glyphicon").removeClass("glyphicon-remove").addClass("glyphicon-ok"),$("#error").hide(),makeRequest()):($("#form").removeClass("has-success").addClass("has-error"),$(".glyphicon").removeClass("glyphicon-ok").addClass("glyphicon-remove"),$("#error").show(),$("#error").text("URL format is not correct"),$("#click-to-copy").hide())}),$("#clean").click(function(){$("#fullURL").val(""),$("#error").hide(),$("#error").text(""),$("#click-to-copy").hide(),$("#shortenURL").text(""),$("#qrcode").text(""),$("#form").removeClass("has-error").removeClass("has-success"),$(".glyphicon").removeClass("glyphicon-remove").removeClass("glyphicon-ok")});var e=new ZeroClipboard($("#click-to-copy"),{moviePath:"./flash/ZeroClipboard.swf",debug:!1});e.on("load",function(e){e.on("complete",function(e,o){e.setText(o.text)})}),$("#click-to-copy").tooltip()}),window.onload=load;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWFrZVJlcXVlc3QiLCJzZXJ2aWNlIiwiJCIsImZpbmQiLCJ2YWwiLCJzZXJ2aWNlTmFtZSIsInRleHQiLCJnYSIsImdldEdvb2dsZSIsImdldEJpdGx5IiwiZ2V0VGlueVVSTCIsImdldElzZ2QiLCJnZXRWZ2QiLCJHb29nbGUiLCJmdWxsVVJMIiwidG9Mb3dlckNhc2UiLCJyZXF1ZXN0IiwiZ2FwaSIsImNsaWVudCIsInVybHNob3J0ZW5lciIsInVybCIsImluc2VydCIsInJlc291cmNlIiwibG9uZ1VybCIsImV4ZWN1dGUiLCJyZXNwb25zZSIsImlzRW1wdHkiLCJpZCIsInNob3ciLCJzIiwiZ2V0X1FSQ29kZSIsInVzZXJuYW1lIiwia2V5IiwiYWpheCIsImRhdGEiLCJhcGlLZXkiLCJsb2dpbiIsImRhdGFUeXBlIiwic3VjY2VzcyIsInYiLCJlcnJvciIsImdldEpTT04iLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0aW55dXJsIiwiZmFpbCIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwibG9hZCIsImhpZGUiLCJhZGRDbGFzcyIsInNldEFwaUtleSIsInNpemUiLCJqUXVlcnkiLCJxcmNvZGUiLCJ3aWR0aCIsImhlaWdodCIsImlzVXJsIiwic3RyUmVnZXgiLCJyZSIsIlJlZ0V4cCIsInRlc3QiLCJzdHIiLCJsZW5ndGgiLCJkb2N1bWVudCIsInJlYWR5Iiwic3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVtb3ZlQ2xhc3MiLCJjbGljayIsIlplcm9DbGlwYm9hcmQiLCJtb3ZpZVBhdGgiLCJkZWJ1ZyIsIm9uIiwiYXJncyIsInNldFRleHQiLCJ0b29sdGlwIiwid2luZG93Iiwib25sb2FkIl0sIm1hcHBpbmdzIjoiQUE0REEsUUFBQUEsZUFDQSxHQUFBQyxHQUFBQyxFQUFBLFlBQUFDLEtBQUEsYUFBQUMsTUFDQUMsRUFBQUgsRUFBQSxZQUFBQyxLQUFBLGFBQUFHLE1BR0EsUUFGQUMs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RUFBQSxrQkFBQTJFLFlBMElBQyxPQUFBQyxPQUFBL0IiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiZm9ybVwiKS5zdWJtaXQoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGZ1bGxVUkwgPSAkKFwiI2Z1bGxVUkxcIikudmFsKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHZhciBzaG9ydGVuVVJMID0gJChcIiNzaG9ydGVuVVJMXCIpLnZhbCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgc2VydmljZSA9ICQoXCIjc2VydmljZVwiKS5maW5kKFwiOnNlbGVjdGVkXCIpLnZhbCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2NsZWFuXG4gICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnRleHQoXCJcIik7XG4gICAgICAgICAgICAkKFwiI3Nob3J0ZW5VUkxcIikudGV4dChcIlwiKTtcbiAgICAgICAgICAgICQoXCIjcXJjb2RlXCIpLnRleHQoXCJcIik7XG5cbiAgICAgICAgICAgIGlmICghaXNVcmwoZnVsbFVSTCkpIHtcbiAgICAgICAgICAgICAgICAvL0Vycm9yXG4gICAgICAgICAgICAgICAgJChcIiNmb3JtXCIpLnJlbW92ZUNsYXNzKFwiaGFzLXN1Y2Nlc3NcIikuYWRkQ2xhc3MoXCJoYXMtZXJyb3JcIik7XG4gICAgICAgICAgICAgICAgJChcIi5nbHlwaGljb25cIikucmVtb3ZlQ2xhc3MoXCJnbHlwaGljb24tb2tcIikuYWRkQ2xhc3MoXCJnbHlwaGljb24tcmVtb3ZlXCIpOyAgICBcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnRleHQoXCJVUkwgZm9ybWF0IGlzIG5vdCBjb3JyZWN0XCIpO1xuICAgICAgICAgICAgICAgICQoXCIjY2xpY2stdG8tY29weVwiKS5oaWRlKCk7XG4gICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL1N1Y2Nlc3NcbiAgICAgICAgICAgICAgICAkKFwiI2Zvcm1cIikucmVtb3ZlQ2xhc3MoXCJoYXMtZXJyb3JcIikuYWRkQ2xhc3MoXCJoYXMtc3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAkKFwiLmdseXBoaWNvblwiKS5yZW1vdmVDbGFzcyhcImdseXBoaWNvbi1yZW1vdmVcIikuYWRkQ2xhc3MoXCJnbHlwaGljb24tb2tcIik7XG4gICAgICAgICAgICAgICAgJChcIiNlcnJvclwiKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgbWFrZVJlcXVlc3QoKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcblxuICAgICAgICB9KTtcblxuICAgICAgICAkKFwiI2NsZWFuXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJChcIiNmdWxsVVJMXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICQoXCIjZXJyb3JcIikuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiNlcnJvclwiKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIjc2hvcnRlblVSTFwiKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgJChcIiNxcmNvZGVcIikudGV4dChcIlwiKTtcbiAgICAgICAgICAgICQoXCIjZm9ybVwiKS5yZW1vdmVDbGFzcyhcImhhcy1lcnJvclwiKS5yZW1vdmVDbGFzcyhcImhhcy1zdWNjZXNzXCIpO1xuICAgICAgICAgICAgJChcIi5nbHlwaGljb25cIikucmVtb3ZlQ2xhc3MoXCJnbHlwaGljb24tcmVtb3ZlXCIpLnJlbW92ZUNsYXNzKFwiZ2x5cGhpY29uLW9rXCIpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIHZhciBjbGllbnQgPSBuZXcgWmVyb0NsaXBib2FyZCggJChcIiNjbGljay10by1jb3B5XCIpLCB7XG4gICAgICAgICAgICAgIG1vdmllUGF0aDogXCIuL2ZsYXNoL1plcm9DbGlwYm9hcmQuc3dmXCIsXG4gICAgICAgICAgICAgIGRlYnVnOiBmYWxzZVxuICAgICAgICB9ICk7XG5cblxuICAgICAgICBjbGllbnQub24oIFwibG9hZFwiLCBmdW5jdGlvbihjbGllbnQpIHtcbiAgICAgICAgICAgICAgICBjbGllbnQub24oIFwiY29tcGxldGVcIiwgZnVuY3Rpb24oY2xpZW50LCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZXRUZXh0KCBhcmdzLnRleHQgKTsgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLnRvb2x0aXAoKTtcbiAgICAgICBcbn0pO1xuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcbiAgICB2YXIgc2VydmljZSA9ICQoXCIjc2VydmljZVwiKS5maW5kKFwiOnNlbGVjdGVkXCIpLnZhbCgpO1xuICAgIHZhciBzZXJ2aWNlTmFtZSA9ICQoXCIjc2VydmljZVwiKS5maW5kKFwiOnNlbGVjdGVkXCIpLnRleHQoKTtcbiAgICBnYSgnc2VuZCcsICdldmVudCcsICdzZXJ2aWNlJywgJ2NsaWNrJywgc2VydmljZU5hbWUsIDApO1xuXG4gICAgc3dpdGNoIChzZXJ2aWNlKSB7XG4gICAgICAgIGNhc2UgXCJnXCI6XG4gICAgICAgICAgICBnZXRHb29nbGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYlwiOlxuICAgICAgICAgICAgZ2V0Qml0bHkoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidFwiOlxuICAgICAgICAgICAgZ2V0VGlueVVSTCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJpXCI6XG4gICAgICAgICAgICBnZXRJc2dkKCk7XG4gICAgICAgICAgICBicmVhazsgXG4gICAgICAgIGNhc2UgXCJ2XCI6XG4gICAgICAgICAgICBnZXRWZ2QoKTtcbiAgICAgICAgICAgIGJyZWFrOyAgICAgICAgIFxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgR29vZ2xlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRHb29nbGUoKSB7XG4gICAgICAgIHZhciBmdWxsVVJMID0gJChcIiNmdWxsVVJMXCIpLnZhbCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gZ2FwaS5jbGllbnQudXJsc2hvcnRlbmVyLnVybC5pbnNlcnQoe1xuICAgICAgICAgICdyZXNvdXJjZSc6IHtcbiAgICAgICAgICAgICAgJ2xvbmdVcmwnOiBmdWxsVVJMXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlcXVlc3QuZXhlY3V0ZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBcbiAgICAgICAgICAgIGlmKCFpc0VtcHR5KHJlc3BvbnNlLmlkKSkge1xuICAgICAgICAgICAgICAgIHZhciBzID0gcmVzcG9uc2UuaWQ7XG4gICAgICAgICAgICAgICAgJChcIiNzaG9ydGVuVVJMXCIpLnRleHQocyk7XG4gICAgICAgICAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICBnZXRfUVJDb2RlKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJChcIiNlcnJvclwiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJChcIiNlcnJvclwiKS50ZXh0KFwiZXJyb3I6IGNyZWF0aW5nIHNob3J0IHVybDogZ29vLmdsXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0Qml0bHkoKSB7XG4gICAgICAgIHZhciB1c2VybmFtZSA9IFwib180cWtoYnM1dmwwXCI7XG4gICAgICAgIHZhciBrZXkgPSBcIlJfMzc3MzkzN2YxYWM2NGU4OGFlNGZlMTMwZDYzNTY2ODFcIjtcbiAgICAgICAgdmFyIGZ1bGxVUkwgPSAkKFwiI2Z1bGxVUkxcIikudmFsKCkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOlwiaHR0cDovL2FwaS5iaXQubHkvdjMvc2hvcnRlblwiLFxuICAgICAgICAgICAgZGF0YTp7bG9uZ1VybDpmdWxsVVJMLGFwaUtleTprZXksbG9naW46dXNlcm5hbWV9LFxuICAgICAgICAgICAgZGF0YVR5cGU6XCJqc29ucFwiLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPXYuZGF0YS51cmw7XG4gICAgICAgICAgICAgICAgJChcIiNzaG9ydGVuVVJMXCIpLnRleHQocyk7XG4gICAgICAgICAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICBnZXRfUVJDb2RlKHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JcIikudGV4dChcImVycm9yOiBjcmVhdGluZyBzaG9ydCB1cmw6IGJpdC5seVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbn1cblxuZnVuY3Rpb24gZ2V0VGlueVVSTCgpIHtcbiAgICAgICAgdmFyIGZ1bGxVUkwgPSAkKFwiI2Z1bGxVUkxcIikudmFsKCkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAkLmdldEpTT04oXG4gICAgICAgICAgXCJodHRwOi8vdXJsdGlueWZ5LmFwcHNwb3QuY29tL3Rpbnl1cmw/dXJsPVwiK2VuY29kZVVSSUNvbXBvbmVudChmdWxsVVJMKStcIiZjYWxsYmFjaz0/XCIsXG4gICAgICAgICAgLy97dXJsOiBmdWxsVVJMfSxcbiAgICAgICAgICBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICB2YXIgcyA9ZGF0YS50aW55dXJsO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI3Nob3J0ZW5VUkxcIikudGV4dChzKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgZ2V0X1FSQ29kZShzKTtcbiAgICAgICAgICB9XG4gICAgICAgICkuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHsgXG4gICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnNob3coKTtcbiAgICAgICAgICAgICQoXCIjZXJyb3JcIikudGV4dChcImVycm9yOiBjcmVhdGluZyBzaG9ydCB1cmw6IFRpbnlVUkxcIik7XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRJc2dkKCkge1xuICAgICAgICB2YXIgZnVsbFVSTCA9ICQoXCIjZnVsbFVSTFwiKS52YWwoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICQuZ2V0SlNPTihcbiAgICAgICAgICBcImh0dHA6Ly91cmx0aW55ZnkuYXBwc3BvdC5jb20vaXNnZD91cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxVUkwpK1wiJmNhbGxiYWNrPT9cIixcbiAgICAgICAgICAvL3t1cmw6IGZ1bGxVUkx9LFxuICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBzID1kYXRhLnRpbnl1cmw7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2hvcnRlblVSTFwiKS50ZXh0KHMpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2NsaWNrLXRvLWNvcHlcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBnZXRfUVJDb2RlKHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgKS5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgeyBcbiAgICAgICAgICAgICQoXCIjZXJyb3JcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiNlcnJvclwiKS50ZXh0KFwiZXJyb3I6IGNyZWF0aW5nIHNob3J0IHVybDogaXMuZ2RcIik7XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRWZ2QoKSAge1xuICAgICAgICB2YXIgZnVsbFVSTCA9ICQoXCIjZnVsbFVSTFwiKS52YWwoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICQuZ2V0SlNPTihcbiAgICAgICAgICBcImh0dHA6Ly91cmx0aW55ZnkuYXBwc3BvdC5jb20vdmdkP3VybD1cIitlbmNvZGVVUklDb21wb25lbnQoZnVsbFVSTCkrXCImY2FsbGJhY2s9P1wiLFxuICAgICAgICAgIC8ve3VybDogZnVsbFVSTH0sXG4gICAgICAgICAgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgdmFyIHMgPWRhdGEudGlueXVybDtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNzaG9ydGVuVVJMXCIpLnRleHQocyk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjY2xpY2stdG8tY29weVwiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIGdldF9RUkNvZGUocyk7XG4gICAgICAgICAgfVxuICAgICAgICApLmZhaWwoZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7IFxuICAgICAgICAgICAgJChcIiNlcnJvclwiKS5zaG93KCk7XG4gICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnRleHQoXCJlcnJvcjogY3JlYXRpbmcgc2hvcnQgdXJsOiB2LmdkXCIpO1xuICAgICAgICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgICAgJChcIiNlcnJvclwiKS5oaWRlKCk7XG4gICAgICAgICQoXCIjZXJyb3JcIikuYWRkQ2xhc3MoXCJpc2FfZXJyb3JcIik7ICAgICAgICBcbiAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLmhpZGUoKTtcblxuICAgICAgICBnYXBpLmNsaWVudC5zZXRBcGlLZXkoJ0FJemFTeUFGUEVURWhPTEpHTUxVcTlRbF9vM2x5SnR2SjVJVWFxbycpO1xuICAgICAgICBnYXBpLmNsaWVudC5sb2FkKCd1cmxzaG9ydGVuZXInLCAndjEnLCBmdW5jdGlvbigpe30pO1xufVxud2luZG93Lm9ubG9hZCA9IGxvYWQ7XG4gICAgXG5mdW5jdGlvbiBnZXRfUVJDb2RlKHRleHQpIHtcbiAgICBcbiAgICB2YXIgc2l6ZSA9IDEyMDtcbiAgICBpZiAoIWlzRW1wdHkodGV4dCkpIHsgICBcbiAgICAgICAgalF1ZXJ5KCcjcXJjb2RlJykucXJjb2RlKHt3aWR0aDogc2l6ZSAsaGVpZ2h0OiBzaXplICx0ZXh0OiB0ZXh0fSk7XG4gICAgfVxufSAgICBcblxuZnVuY3Rpb24gaXNVcmwodXJsKSB7XG4gICB2YXIgc3RyUmVnZXggPSBcIl4oKGh0dHBzfGh0dHB8ZnRwfHJ0c3B8bW1zKT86Ly8pXCJcbiAgICAgICAgKyBcIj8oKFswLTlhLXpfIX4qJygpLiY9KyQlLV0rOiApP1swLTlhLXpfIX4qJygpLiY9KyQlLV0rQCk/XCIgLy9mdHDnmoR1c2VyQFxuICAgICAgICArIFwiKChbMC05XXsxLDN9XFwuKXszfVswLTldezEsM31cIiAvLyBJUOW9ouW8j+eahFVSTC0gMTk5LjE5NC41Mi4xODRcbiAgICAgICAgKyBcInxcIiAvLyDlhYHorrhJUOWSjERPTUFJTu+8iOWfn+WQje+8iVxuICAgICAgICArIFwiKFswLTlhLXpfIX4qJygpLV0rXFwuKSpcIiAvLyDln5/lkI0tIHd3dy5cbiAgICAgICAgKyBcIihbMC05YS16XVswLTlhLXotXXswLDYxfSk/WzAtOWEtel1cXC5cIiAvLyDkuoznuqfln5/lkI1cbiAgICAgICAgKyBcIlthLXpdezIsNn0pXCIgLy8gZmlyc3QgbGV2ZWwgZG9tYWluLSAuY29tIG9yIC5tdXNldW1cbiAgICAgICAgLy8rIFwiKDpbMC05XXsxLDR9KT9cIiAvLyDnq6/lj6MtIDo4MFxuICAgICAgICArIFwiKCgvPyl8XCIgLy8gYSBzbGFzaCBpc24ndCByZXF1aXJlZCBpZiB0aGVyZSBpcyBubyBmaWxlIG5hbWVcbiAgICAgICAgKyBcIigvWzAtOWEtel8hfionKCkuOz86QCY9KyQsJSMtXSspKy8/KSRcIjtcbiAgICAgdmFyIHJlPW5ldyBSZWdFeHAoc3RyUmVnZXgpO1xuICAgICByZXR1cm4gcmUudGVzdCh1cmwpO1xufVxuXG5mdW5jdGlvbiBpc0VtcHR5KHN0cikge1xuICAgIHJldHVybiAoIXN0ciB8fCAwID09PSBzdHIubGVuZ3RoKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==