function makeRequest(){var e=$("#service").find(":selected").val();switch(e){case"g":getGoogle();break;case"b":getBitly();break;case"t":getTinyURL();break;default:getGoogle()}}function getGoogle(){var e=$("#fullURL").val().toLowerCase(),o=gapi.client.urlshortener.url.insert({resource:{longUrl:e}});o.execute(function(e){if(isEmpty(e.id))$("#error").show(),$("#error").text("error: creating short url: goo.gl");else{var o=e.id;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}})}function getBitly(){var e="o_4qkhbs5vl0",o="R_3773937f1ac64e88ae4fe130d6356681",t=$("#fullURL").val().toLowerCase();$.ajax({url:"https://api-ssl.bitly.com/v3/shorten",data:{longUrl:t,apiKey:o,login:e},dataType:"jsonp",success:function(e){var o=e.data.url;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)},error:function(){$("#error").show(),$("#error").text("error: creating short url: bit.ly")}})}function getTinyURL(){var e=$("#fullURL").val().toLowerCase();$.getJSON("https://urltinyfy.appspot.com/tinyurl?url="+encodeURIComponent(e)+"&callback=?",function(e){var o=e.tinyurl;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}).fail(function(e,o,t){$("#error").show(),$("#error").text("error: creating short url: TinyURL")})}function getIsgd(){var e=$("#fullURL").val().toLowerCase();$.getJSON("https://urltinyfy.appspot.com/isgd?url="+encodeURIComponent(e)+"&callback=?",function(e){var o=e.tinyurl;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}).fail(function(e,o,t){$("#error").show(),$("#error").text("error: creating short url: is.gd")})}function getVgd(){var e=$("#fullURL").val().toLowerCase();$.getJSON("https://urltinyfy.appspot.com/vgd?url="+encodeURIComponent(e)+"&callback=?",function(e){var o=e.tinyurl;$("#shortenURL").text(o),$("#click-to-copy").show(),get_QRCode(o)}).fail(function(e,o,t){$("#error").show(),$("#error").text("error: creating short url: v.gd")})}function load(){$("#error").hide(),$("#error").addClass("isa_error"),$("#click-to-copy").hide(),gapi.client.setApiKey("AIzaSyAFPETEhOLJGMLUq9Ql_o3lyJtvJ5IUaqo"),gapi.client.load("urlshortener","v1",function(){})}function get_QRCode(e){var o=120;isEmpty(e)||jQuery("#qrcode").qrcode({width:o,height:o,text:e})}function isUrl(e){var o="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$",t=new RegExp(o);return t.test(e)}function isEmpty(e){return!e||0===e.length}$(document).ready(function(){$("form").submit(function(e){e.preventDefault();{var o=$("#fullURL").val().toLowerCase();$("#shortenURL").val(),$("#service").find(":selected").val()}$("#error").text(""),$("#shortenURL").text(""),$("#qrcode").text(""),isUrl(o)?($("#form").removeClass("has-error").addClass("has-success"),$(".glyphicon").removeClass("glyphicon-remove").addClass("glyphicon-ok"),$("#error").hide(),makeRequest()):($("#form").removeClass("has-success").addClass("has-error"),$(".glyphicon").removeClass("glyphicon-ok").addClass("glyphicon-remove"),$("#error").show(),$("#error").text("URL format is not correct"),$("#click-to-copy").hide())}),$("#clean").click(function(){$("#fullURL").val(""),$("#error").hide(),$("#error").text(""),$("#click-to-copy").hide(),$("#shortenURL").text(""),$("#qrcode").text(""),$("#form").removeClass("has-error").removeClass("has-success"),$(".glyphicon").removeClass("glyphicon-remove").removeClass("glyphicon-ok")});var e=new Clipboard("#click-to-copy");e.on("success",function(e){console.info("Action:",e.action),console.info("Text:",e.text),e.clearSelection()}),$("#click-to-copy").tooltip(),function(e,o,t){var r,n=e.getElementsByTagName(o)[0];e.getElementById(t)||(r=e.createElement(o),r.id=t,r.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4&appId=914645301919009",n.parentNode.insertBefore(r,n))}(document,"script","facebook-jssdk")}),window.onload=load;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWFrZVJlcXVlc3QiLCJzZXJ2aWNlIiwiJCIsImZpbmQiLCJ2YWwiLCJnZXRHb29nbGUiLCJnZXRCaXRseSIsImdldFRpbnlVUkwiLCJmdWxsVVJMIiwidG9Mb3dlckNhc2UiLCJyZXF1ZXN0IiwiZ2FwaSIsImNsaWVudCIsInVybHNob3J0ZW5lciIsInVybCIsImluc2VydCIsInJlc291cmNlIiwibG9uZ1VybCIsImV4ZWN1dGUiLCJyZXNwb25zZSIsImlzRW1wdHkiLCJpZCIsInNob3ciLCJ0ZXh0IiwicyIsImdldF9RUkNvZGUiLCJ1c2VybmFtZSIsImtleSIsImFqYXgiLCJkYXRhIiwiYXBpS2V5IiwibG9naW4iLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJ2IiwiZXJyb3IiLCJnZXRKU09OIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGlueXVybCIsImZhaWwiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsImdldElzZ2QiLCJnZXRWZ2QiLCJsb2FkIiwiaGlkZSIsImFkZENsYXNzIiwic2V0QXBpS2V5Iiwic2l6ZSIsImpRdWVyeSIsInFyY29kZSIsIndpZHRoIiwiaGVpZ2h0IiwiaXNVcmwiLCJzdHJSZWdleCIsInJlIiwiUmVnRXhwIiwidGVzdCIsInN0ciIsImxlbmd0aCIsImRvY3VtZW50IiwicmVhZHkiLCJzdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmVDbGFzcyIsImNsaWNrIiwiY2xpcGJvYXJkIiwiQ2xpcGJvYXJkIiwib24iLCJjb25zb2xlIiwiaW5mbyIsImFjdGlvbiIsImNsZWFyU2VsZWN0aW9uIiwidG9vbHRpcCIsImQiLCJqcyIsImZqcyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIndpbmRvdyIsIm9ubG9hZCJdLCJtYXBwaW5ncyI6IkFBdUVB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RCxFQUFBSCxHQUNBLEdBQUF3RCxHQUFBQyxFQUFBRixFQUFBRyxxQkFBQXZELEdBQUEsRUFDQW9ELEdBQUFJLGVBQUEzRCxLQUNBd0QsRUFBQUQsRUFBQUssY0FBQXpELEdBQUFxRCxFQUFBeEQsR0FBQUEsRUFDQXdELEVBQUFLLElBQUEsaUZBQ0FKLEVBQUFLLFdBQUFDLGFBQUFQLEVBQUFDLEtBQ0FqQixTQUFBLFNBQUEsb0JBb0lBd0IsT0FBQUMsT0FBQXpDIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICAgICAgICAvL1Nob3J0ZW4gQnV0dG9uXG4gICAgICAgICQoXCJmb3JtXCIpLnN1Ym1pdChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgZnVsbFVSTCA9ICQoXCIjZnVsbFVSTFwiKS52YWwoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgdmFyIHNob3J0ZW5VUkwgPSAkKFwiI3Nob3J0ZW5VUkxcIikudmFsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gJChcIiNzZXJ2aWNlXCIpLmZpbmQoXCI6c2VsZWN0ZWRcIikudmFsKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vY2xlYW5cbiAgICAgICAgICAgICQoXCIjZXJyb3JcIikudGV4dChcIlwiKTtcbiAgICAgICAgICAgICQoXCIjc2hvcnRlblVSTFwiKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgJChcIiNxcmNvZGVcIikudGV4dChcIlwiKTtcblxuICAgICAgICAgICAgaWYgKCFpc1VybChmdWxsVVJMKSkge1xuICAgICAgICAgICAgICAgIC8vRXJyb3JcbiAgICAgICAgICAgICAgICAkKFwiI2Zvcm1cIikucmVtb3ZlQ2xhc3MoXCJoYXMtc3VjY2Vzc1wiKS5hZGRDbGFzcyhcImhhcy1lcnJvclwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLmdseXBoaWNvblwiKS5yZW1vdmVDbGFzcyhcImdseXBoaWNvbi1va1wiKS5hZGRDbGFzcyhcImdseXBoaWNvbi1yZW1vdmVcIik7ICAgIFxuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoXCIjZXJyb3JcIikudGV4dChcIlVSTCBmb3JtYXQgaXMgbm90IGNvcnJlY3RcIik7XG4gICAgICAgICAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLmhpZGUoKTtcbiAgICAgICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vU3VjY2Vzc1xuICAgICAgICAgICAgICAgICQoXCIjZm9ybVwiKS5yZW1vdmVDbGFzcyhcImhhcy1lcnJvclwiKS5hZGRDbGFzcyhcImhhcy1zdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgICQoXCIuZ2x5cGhpY29uXCIpLnJlbW92ZUNsYXNzKFwiZ2x5cGhpY29uLXJlbW92ZVwiKS5hZGRDbGFzcyhcImdseXBoaWNvbi1va1wiKTtcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBtYWtlUmVxdWVzdCgpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vQ2xlYW4gQnV0dG9uXG4gICAgICAgICQoXCIjY2xlYW5cIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKFwiI2Z1bGxVUkxcIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgJChcIiNlcnJvclwiKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnRleHQoXCJcIik7XG4gICAgICAgICAgICAkKFwiI2NsaWNrLXRvLWNvcHlcIikuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiNzaG9ydGVuVVJMXCIpLnRleHQoXCJcIik7XG4gICAgICAgICAgICAkKFwiI3FyY29kZVwiKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgJChcIiNmb3JtXCIpLnJlbW92ZUNsYXNzKFwiaGFzLWVycm9yXCIpLnJlbW92ZUNsYXNzKFwiaGFzLXN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAkKFwiLmdseXBoaWNvblwiKS5yZW1vdmVDbGFzcyhcImdseXBoaWNvbi1yZW1vdmVcIikucmVtb3ZlQ2xhc3MoXCJnbHlwaGljb24tb2tcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBjbGlwYm9hcmQgPSBuZXcgQ2xpcGJvYXJkKFwiI2NsaWNrLXRvLWNvcHlcIik7XG5cbiAgICAgICAgY2xpcGJvYXJkLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdBY3Rpb246JywgZS5hY3Rpb24pO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdUZXh0OicsIGUudGV4dCk7XG4gICAgICAgICAgICAvL2NvbnNvbGUuaW5mbygnVHJpZ2dlcjonLCBlLnRyaWdnZXIpO1xuICAgICAgICAgICAgZS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL0NvcHkgdG8gQ2xpcGJvYXJkIFRvb2x0aXBcbiAgICAgICAgJChcIiNjbGljay10by1jb3B5XCIpLnRvb2x0aXAoKTtcblxuXG5cbiAgICAgICAgLy9GYWNlYm9vayBMaWtlIEJ1dHRvblxuICAgICAgICAoZnVuY3Rpb24oZCwgcywgaWQpIHtcbiAgICAgICAgICAgICAgdmFyIGpzLCBmanMgPSBkLmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdO1xuICAgICAgICAgICAgICBpZiAoZC5nZXRFbGVtZW50QnlJZChpZCkpIHJldHVybjtcbiAgICAgICAgICAgICAganMgPSBkLmNyZWF0ZUVsZW1lbnQocyk7IGpzLmlkID0gaWQ7XG4gICAgICAgICAgICAgIGpzLnNyYyA9IFwiLy9jb25uZWN0LmZhY2Vib29rLm5ldC9lbl9VUy9zZGsuanMjeGZibWw9MSZ2ZXJzaW9uPXYyLjQmYXBwSWQ9OTE0NjQ1MzAxOTE5MDA5XCI7XG4gICAgICAgICAgICAgIGZqcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShqcywgZmpzKTtcbiAgICAgICAgICAgIH0oZG9jdW1lbnQsICdzY3JpcHQnLCAnZmFjZWJvb2stanNzZGsnKSk7XG4gICAgICAgXG59KTtcblxuZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XG4gICAgdmFyIHNlcnZpY2UgPSAkKFwiI3NlcnZpY2VcIikuZmluZChcIjpzZWxlY3RlZFwiKS52YWwoKTtcbiAgICAvL3ZhciBzZXJ2aWNlTmFtZSA9ICQoXCIjc2VydmljZVwiKS5maW5kKFwiOnNlbGVjdGVkXCIpLnRleHQoKTtcbiAgICAvL2dhKCdzZW5kJywgJ2V2ZW50JywgJ3NlcnZpY2UnLCAnY2xpY2snLCBzZXJ2aWNlTmFtZSwgMCk7XG5cbiAgICBzd2l0Y2ggKHNlcnZpY2UpIHtcbiAgICAgICAgY2FzZSBcImdcIjpcbiAgICAgICAgICAgIGdldEdvb2dsZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJiXCI6XG4gICAgICAgICAgICBnZXRCaXRseSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0XCI6XG4gICAgICAgICAgICBnZXRUaW55VVJMKCk7XG4gICAgICAgICAgICBicmVhazsgICAgICAgXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBnZXRHb29nbGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEdvb2dsZSgpIHtcbiAgICAgICAgdmFyIGZ1bGxVUkwgPSAkKFwiI2Z1bGxVUkxcIikudmFsKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBnYXBpLmNsaWVudC51cmxzaG9ydGVuZXIudXJsLmluc2VydCh7XG4gICAgICAgICAgJ3Jlc291cmNlJzoge1xuICAgICAgICAgICAgICAnbG9uZ1VybCc6IGZ1bGxVUkxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmVxdWVzdC5leGVjdXRlKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIFxuICAgICAgICAgICAgaWYoIWlzRW1wdHkocmVzcG9uc2UuaWQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSByZXNwb25zZS5pZDtcbiAgICAgICAgICAgICAgICAkKFwiI3Nob3J0ZW5VUkxcIikudGV4dChzKTtcbiAgICAgICAgICAgICAgICAkKFwiI2NsaWNrLXRvLWNvcHlcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIGdldF9RUkNvZGUocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnRleHQoXCJlcnJvcjogY3JlYXRpbmcgc2hvcnQgdXJsOiBnb28uZ2xcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRCaXRseSgpIHtcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gXCJvXzRxa2hiczV2bDBcIjtcbiAgICAgICAgdmFyIGtleSA9IFwiUl8zNzczOTM3ZjFhYzY0ZTg4YWU0ZmUxMzBkNjM1NjY4MVwiO1xuICAgICAgICB2YXIgZnVsbFVSTCA9ICQoXCIjZnVsbFVSTFwiKS52YWwoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6XCJodHRwczovL2FwaS1zc2wuYml0bHkuY29tL3YzL3Nob3J0ZW5cIixcbiAgICAgICAgICAgIGRhdGE6e2xvbmdVcmw6ZnVsbFVSTCxhcGlLZXk6a2V5LGxvZ2luOnVzZXJuYW1lfSxcbiAgICAgICAgICAgIGRhdGFUeXBlOlwianNvbnBcIixcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICAgIHZhciBzID12LmRhdGEudXJsO1xuICAgICAgICAgICAgICAgICQoXCIjc2hvcnRlblVSTFwiKS50ZXh0KHMpO1xuICAgICAgICAgICAgICAgICQoXCIjY2xpY2stdG8tY29weVwiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgZ2V0X1FSQ29kZShzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKFwiI2Vycm9yXCIpLnRleHQoXCJlcnJvcjogY3JlYXRpbmcgc2hvcnQgdXJsOiBiaXQubHlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG59XG5cbmZ1bmN0aW9uIGdldFRpbnlVUkwoKSB7XG4gICAgICAgIHZhciBmdWxsVVJMID0gJChcIiNmdWxsVVJMXCIpLnZhbCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgJC5nZXRKU09OKFxuICAgICAgICAgIFwiaHR0cHM6Ly91cmx0aW55ZnkuYXBwc3BvdC5jb20vdGlueXVybD91cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxVUkwpK1wiJmNhbGxiYWNrPT9cIixcbiAgICAgICAgICAvL3t1cmw6IGZ1bGxVUkx9LFxuICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBzID1kYXRhLnRpbnl1cmw7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2hvcnRlblVSTFwiKS50ZXh0KHMpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2NsaWNrLXRvLWNvcHlcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBnZXRfUVJDb2RlKHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgKS5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgeyBcbiAgICAgICAgICAgICQoXCIjZXJyb3JcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiNlcnJvclwiKS50ZXh0KFwiZXJyb3I6IGNyZWF0aW5nIHNob3J0IHVybDogVGlueVVSTFwiKTtcbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldElzZ2QoKSB7XG4gICAgICAgIHZhciBmdWxsVVJMID0gJChcIiNmdWxsVVJMXCIpLnZhbCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgJC5nZXRKU09OKFxuICAgICAgICAgIFwiaHR0cHM6Ly91cmx0aW55ZnkuYXBwc3BvdC5jb20vaXNnZD91cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxVUkwpK1wiJmNhbGxiYWNrPT9cIixcbiAgICAgICAgICAvL3t1cmw6IGZ1bGxVUkx9LFxuICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBzID1kYXRhLnRpbnl1cmw7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2hvcnRlblVSTFwiKS50ZXh0KHMpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2NsaWNrLXRvLWNvcHlcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBnZXRfUVJDb2RlKHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgKS5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgeyBcbiAgICAgICAgICAgICQoXCIjZXJyb3JcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiNlcnJvclwiKS50ZXh0KFwiZXJyb3I6IGNyZWF0aW5nIHNob3J0IHVybDogaXMuZ2RcIik7XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRWZ2QoKSAge1xuICAgICAgICB2YXIgZnVsbFVSTCA9ICQoXCIjZnVsbFVSTFwiKS52YWwoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICQuZ2V0SlNPTihcbiAgICAgICAgICBcImh0dHBzOi8vdXJsdGlueWZ5LmFwcHNwb3QuY29tL3ZnZD91cmw9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxVUkwpK1wiJmNhbGxiYWNrPT9cIixcbiAgICAgICAgICAvL3t1cmw6IGZ1bGxVUkx9LFxuICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgIHZhciBzID1kYXRhLnRpbnl1cmw7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjc2hvcnRlblVSTFwiKS50ZXh0KHMpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiI2NsaWNrLXRvLWNvcHlcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBnZXRfUVJDb2RlKHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgKS5mYWlsKGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgeyBcbiAgICAgICAgICAgICQoXCIjZXJyb3JcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiNlcnJvclwiKS50ZXh0KFwiZXJyb3I6IGNyZWF0aW5nIHNob3J0IHVybDogdi5nZFwiKTtcbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICAgICQoXCIjZXJyb3JcIikuaGlkZSgpO1xuICAgICAgICAkKFwiI2Vycm9yXCIpLmFkZENsYXNzKFwiaXNhX2Vycm9yXCIpOyAgICAgICAgXG4gICAgICAgICQoXCIjY2xpY2stdG8tY29weVwiKS5oaWRlKCk7XG5cbiAgICAgICAgZ2FwaS5jbGllbnQuc2V0QXBpS2V5KCdBSXphU3lBRlBFVEVoT0xKR01MVXE5UWxfbzNseUp0dko1SVVhcW8nKTtcbiAgICAgICAgZ2FwaS5jbGllbnQubG9hZCgndXJsc2hvcnRlbmVyJywgJ3YxJywgZnVuY3Rpb24oKXt9KTtcbn1cbndpbmRvdy5vbmxvYWQgPSBsb2FkO1xuICAgIFxuZnVuY3Rpb24gZ2V0X1FSQ29kZSh0ZXh0KSB7XG4gICAgXG4gICAgdmFyIHNpemUgPSAxMjA7XG4gICAgaWYgKCFpc0VtcHR5KHRleHQpKSB7ICAgXG4gICAgICAgIGpRdWVyeSgnI3FyY29kZScpLnFyY29kZSh7d2lkdGg6IHNpemUgLGhlaWdodDogc2l6ZSAsdGV4dDogdGV4dH0pO1xuICAgIH1cbn0gICAgXG5cbmZ1bmN0aW9uIGlzVXJsKHVybCkge1xuICAgdmFyIHN0clJlZ2V4ID0gXCJeKChodHRwc3xodHRwfGZ0cHxydHNwfG1tcyk/Oi8vKVwiXG4gICAgICAgICsgXCI/KChbMC05YS16XyF+KicoKS4mPSskJS1dKzogKT9bMC05YS16XyF+KicoKS4mPSskJS1dK0ApP1wiIC8vZnRw55qEdXNlckBcbiAgICAgICAgKyBcIigoWzAtOV17MSwzfVxcLil7M31bMC05XXsxLDN9XCIgLy8gSVDlvaLlvI/nmoRVUkwtIDE5OS4xOTQuNTIuMTg0XG4gICAgICAgICsgXCJ8XCIgLy8g5YWB6K64SVDlkoxET01BSU7vvIjln5/lkI3vvIlcbiAgICAgICAgKyBcIihbMC05YS16XyF+KicoKS1dK1xcLikqXCIgLy8g5Z+f5ZCNLSB3d3cuXG4gICAgICAgICsgXCIoWzAtOWEtel1bMC05YS16LV17MCw2MX0pP1swLTlhLXpdXFwuXCIgLy8g5LqM57qn5Z+f5ZCNXG4gICAgICAgICsgXCJbYS16XXsyLDZ9KVwiIC8vIGZpcnN0IGxldmVsIGRvbWFpbi0gLmNvbSBvciAubXVzZXVtXG4gICAgICAgIC8vKyBcIig6WzAtOV17MSw0fSk/XCIgLy8g56uv5Y+jLSA6ODBcbiAgICAgICAgKyBcIigoLz8pfFwiIC8vIGEgc2xhc2ggaXNuJ3QgcmVxdWlyZWQgaWYgdGhlcmUgaXMgbm8gZmlsZSBuYW1lXG4gICAgICAgICsgXCIoL1swLTlhLXpfIX4qJygpLjs/OkAmPSskLCUjLV0rKSsvPykkXCI7XG4gICAgIHZhciByZT1uZXcgUmVnRXhwKHN0clJlZ2V4KTtcbiAgICAgcmV0dXJuIHJlLnRlc3QodXJsKTtcbn1cblxuZnVuY3Rpb24gaXNFbXB0eShzdHIpIHtcbiAgICByZXR1cm4gKCFzdHIgfHwgMCA9PT0gc3RyLmxlbmd0aCk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=