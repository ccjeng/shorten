{"version":3,"sources":["main.js"],"names":["makeRequest","$","find","val","getGoogle","getBitly","getTinyURL","fullURL","toLowerCase","gapi","client","urlshortener","url","insert","resource","longUrl","execute","response","isEmpty","id","show","text","s","get_QRCode","ajax","data","apiKey","login","dataType","success","v","error","getJSON","encodeURIComponent","tinyurl","fail","jqXHR","textStatus","errorThrown","getIsgd","getVgd","load","hide","addClass","setApiKey","jQuery","qrcode","width","height","isUrl","RegExp","test","str","length","document","ready","submit","e","preventDefault","removeClass","click","Clipboard","on","console","info","action","clearSelection","tooltip","d","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","window","onload"],"mappings":"AAuEA,QAAAA,eAKA,OAJAC,EAAA,YAAAC,KAAA,aAAAC,OAKA,IAAA,IACAC,WACA,MACA,KAAA,IACAC,UACA,MACA,KAAA,IACAC,YACA,MACA,SACAF,aAIA,QAAAA,aACA,GAAAG,GAAAN,EAAA,YAAAE,MAAAK,aACAC,MAAAC,OAAAC,aAAAC,IAAAC,QACAC,UACAC,QAAAR,KAIAS,QAAA,SAAAC,GAEA,GAAAC,QAAAD,EAAAE,IAOAlB,EAAA,UAAAmB,OACAnB,EAAA,UAAAoB,KAAA,yCARA,CACA,GAAAC,GAAAL,EAAAE,EACAlB,GAAA,eAAAoB,KAAAC,GACArB,EAAA,kBAAAmB,OACAG,WAAAD,MASA,QAAAjB,YACA,GAEAE,GAAAN,EAAA,YAAAE,MAAAK,aAEAP,GAAAuB,MACAZ,IAAA,uCACAa,MAAAV,QAAAR,EAAAmB,OALA,qCAKAC,MANA,gBAOAC,SAAA,QACAC,QAAA,SAAAC,GACA,GAAAR,GAAAQ,EAAAL,KAAAb,GACAX,GAAA,eAAAoB,KAAAC,GACArB,EAAA,kBAAAmB,OACAG,WAAAD,IAEAS,MAAA,WACA9B,EAAA,UAAAmB,OACAnB,EAAA,UAAAoB,KAAA,wCAMA,QAAAf,cACA,GAAAC,GAAAN,EAAA,YAAAE,MAAAK,aAEAP,GAAA+B,QACA,6CAAAC,mBAAA1B,GAAA,cAEA,SAAAkB,GACA,GAAAH,GAAAG,EAAAS,OACAjC,GAAA,eAAAoB,KAAAC,GACArB,EAAA,kBAAAmB,OACAG,WAAAD,KAEAa,KAAA,SAAAC,EAAAC,EAAAC,GACArC,EAAA,UAAAmB,OACAnB,EAAA,UAAAoB,KAAA,wCAIA,QAAAkB,WACA,GAAAhC,GAAAN,EAAA,YAAAE,MAAAK,aAEAP,GAAA+B,QACA,0CAAAC,mBAAA1B,GAAA,cAEA,SAAAkB,GACA,GAAAH,GAAAG,EAAAS,OACAjC,GAAA,eAAAoB,KAAAC,GACArB,EAAA,kBAAAmB,OACAG,WAAAD,KAEAa,KAAA,SAAAC,EAAAC,EAAAC,GACArC,EAAA,UAAAmB,OACAnB,EAAA,UAAAoB,KAAA,sCAIA,QAAAmB,UACA,GAAAjC,GAAAN,EAAA,YAAAE,MAAAK,aAEAP,GAAA+B,QACA,yCAAAC,mBAAA1B,GAAA,cAEA,SAAAkB,GACA,GAAAH,GAAAG,EAAAS,OACAjC,GAAA,eAAAoB,KAAAC,GACArB,EAAA,kBAAAmB,OACAG,WAAAD,KAEAa,KAAA,SAAAC,EAAAC,EAAAC,GACArC,EAAA,UAAAmB,OACAnB,EAAA,UAAAoB,KAAA,qCAIA,QAAAoB,QACAxC,EAAA,UAAAyC,OACAzC,EAAA,UAAA0C,SAAA,aACA1C,EAAA,kBAAAyC,OAEAjC,KAAAC,OAAAkC,UAAA,2CACAnC,KAAAC,OAAA+B,KAAA,eAAA,KAAA,cAIA,QAAAlB,YAAAF,GAGAH,QAAAG,IACAwB,OAAA,WAAAC,QAAAC,MAFA,IAEAC,OAFA,IAEA3B,KAAAA,IAIA,QAAA4B,OAAArC,GAYA,MADA,IAAAsC,QAVA,sOAWAC,KAAAvC,GAGA,QAAAM,SAAAkC,GACA,OAAAA,GAAA,IAAAA,EAAAC,OAjOApD,EAAAqD,UAAAC,MAAA,WAGAtD,EAAA,QAAAuD,OAAA,SAAAC,GACAA,EAAAC,gBACA,IAAAnD,GAAAN,EAAA,YAAAE,MAAAK,aACAP,GAAA,eAAAE,MAEAF,EAAA,YAAAC,KAAA,aAAAC,KAGAF,GAAA,UAAAoB,KAAA,IACApB,EAAA,eAAAoB,KAAA,IACApB,EAAA,WAAAoB,KAAA,IAEA4B,MAAA1C,IAUAN,EAAA,SAAA0D,YAAA,aAAAhB,SAAA,eACA1C,EAAA,cAAA0D,YAAA,oBAAAhB,SAAA,gBACA1C,EAAA,UAAAyC,OACA1C,gBAXAC,EAAA,SAAA0D,YAAA,eAAAhB,SAAA,aACA1C,EAAA,cAAA0D,YAAA,gBAAAhB,SAAA,oBACA1C,EAAA,UAAAmB,OACAnB,EAAA,UAAAoB,KAAA,6BACApB,EAAA,kBAAAyC,UAcAzC,EAAA,UAAA2D,MAAA,WACA3D,EAAA,YAAAE,IAAA,IACAF,EAAA,UAAAyC,OACAzC,EAAA,UAAAoB,KAAA,IACApB,EAAA,kBAAAyC,OACAzC,EAAA,eAAAoB,KAAA,IACApB,EAAA,WAAAoB,KAAA,IACApB,EAAA,SAAA0D,YAAA,aAAAA,YAAA,eACA1D,EAAA,cAAA0D,YAAA,oBAAAA,YAAA,kBAGA,GAAAE,WAAA,kBAEAC,GAAA,UAAA,SAAAL,GACAM,QAAAC,KAAA,UAAAP,EAAAQ,QACAF,QAAAC,KAAA,QAAAP,EAAApC,MAEAoC,EAAAS,mBAIAjE,EAAA,kBAAAkE,UAKA,SAAAC,EAAA9C,EAAAH,GACA,GAAAkD,GAAAC,EAAAF,EAAAG,qBAAAjD,GAAA,EACA8C,GAAAI,eAAArD,KACAkD,EAAAD,EAAAK,cAAAnD,GAAA+C,EAAAlD,GAAAA,EACAkD,EAAAK,IAAA,iFACAJ,EAAAK,WAAAC,aAAAP,EAAAC,KACAhB,SAAA,SAAA,oBAoIAuB,OAAAC,OAAArC","file":"all.min.js","sourcesContent":["$(document).ready(function() {\n\n        //Shorten Button\n        $(\"form\").submit(function(e) {\n            e.preventDefault();\n            var fullURL = $(\"#fullURL\").val().toLowerCase();\n            var shortenURL = $(\"#shortenURL\").val();\n            \n            var service = $(\"#service\").find(\":selected\").val();\n            \n            //clean\n            $(\"#error\").text(\"\");\n            $(\"#shortenURL\").text(\"\");\n            $(\"#qrcode\").text(\"\");\n\n            if (!isUrl(fullURL)) {\n                //Error\n                $(\"#form\").removeClass(\"has-success\").addClass(\"has-error\");\n                $(\".glyphicon\").removeClass(\"glyphicon-ok\").addClass(\"glyphicon-remove\");    \n                $(\"#error\").show();\n                $(\"#error\").text(\"URL format is not correct\");\n                $(\"#click-to-copy\").hide();\n        \n            } else {\n                //Success\n                $(\"#form\").removeClass(\"has-error\").addClass(\"has-success\");\n                $(\".glyphicon\").removeClass(\"glyphicon-remove\").addClass(\"glyphicon-ok\");\n                $(\"#error\").hide();\n                makeRequest();                \n            }\n            \n\n        });\n\n        //Clean Button\n        $(\"#clean\").click(function() {\n            $(\"#fullURL\").val(\"\");\n            $(\"#error\").hide();\n            $(\"#error\").text(\"\");\n            $(\"#click-to-copy\").hide();\n            $(\"#shortenURL\").text(\"\");\n            $(\"#qrcode\").text(\"\");\n            $(\"#form\").removeClass(\"has-error\").removeClass(\"has-success\");\n            $(\".glyphicon\").removeClass(\"glyphicon-remove\").removeClass(\"glyphicon-ok\");\n        });\n\n        var clipboard = new Clipboard(\"#click-to-copy\");\n\n        clipboard.on('success', function(e) {\n            console.info('Action:', e.action);\n            console.info('Text:', e.text);\n            //console.info('Trigger:', e.trigger);\n            e.clearSelection();\n        });\n\n        //Copy to Clipboard Tooltip\n        $(\"#click-to-copy\").tooltip();\n\n\n\n        //Facebook Like Button\n        (function(d, s, id) {\n              var js, fjs = d.getElementsByTagName(s)[0];\n              if (d.getElementById(id)) return;\n              js = d.createElement(s); js.id = id;\n              js.src = \"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4&appId=914645301919009\";\n              fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n       \n});\n\nfunction makeRequest() {\n    var service = $(\"#service\").find(\":selected\").val();\n    //var serviceName = $(\"#service\").find(\":selected\").text();\n    //ga('send', 'event', 'service', 'click', serviceName, 0);\n\n    switch (service) {\n        case \"g\":\n            getGoogle();\n            break;\n        case \"b\":\n            getBitly();\n            break;\n        case \"t\":\n            getTinyURL();\n            break;       \n        default:\n            getGoogle();\n            break;\n    }\n}\nfunction getGoogle() {\n        var fullURL = $(\"#fullURL\").val().toLowerCase();\n        var request = gapi.client.urlshortener.url.insert({\n          'resource': {\n              'longUrl': fullURL\n            }\n        });\n\n        request.execute(function(response) {\n        \n            if(!isEmpty(response.id)) {\n                var s = response.id;\n                $(\"#shortenURL\").text(s);\n                $(\"#click-to-copy\").show();\n                get_QRCode(s);\n            }\n            else {\n                $(\"#error\").show();\n                $(\"#error\").text(\"error: creating short url: goo.gl\");\n            }\n        });\n}\n\nfunction getBitly() {\n        var username = \"o_4qkhbs5vl0\";\n        var key = \"R_3773937f1ac64e88ae4fe130d6356681\";\n        var fullURL = $(\"#fullURL\").val().toLowerCase();\n\n        $.ajax({\n            url:\"https://api-ssl.bitly.com/v3/shorten\",\n            data:{longUrl:fullURL,apiKey:key,login:username},\n            dataType:\"jsonp\",\n            success:function(v) {\n                var s =v.data.url;\n                $(\"#shortenURL\").text(s);\n                $(\"#click-to-copy\").show();\n                get_QRCode(s);\n            },\n            error: function(){\n                $(\"#error\").show();\n                $(\"#error\").text(\"error: creating short url: bit.ly\");\n            }\n        });\n\n}\n\nfunction getTinyURL() {\n        var fullURL = $(\"#fullURL\").val().toLowerCase();\n\n        $.getJSON(\n          \"https://urltinyfy.appspot.com/tinyurl?url=\"+encodeURIComponent(fullURL)+\"&callback=?\",\n          //{url: fullURL},\n          function(data){\n                var s =data.tinyurl;\n                    $(\"#shortenURL\").text(s);\n                    $(\"#click-to-copy\").show();\n                    get_QRCode(s);\n          }\n        ).fail(function(jqXHR, textStatus, errorThrown) { \n            $(\"#error\").show();\n            $(\"#error\").text(\"error: creating short url: TinyURL\");\n        });\n}\n\nfunction getIsgd() {\n        var fullURL = $(\"#fullURL\").val().toLowerCase();\n\n        $.getJSON(\n          \"https://urltinyfy.appspot.com/isgd?url=\"+encodeURIComponent(fullURL)+\"&callback=?\",\n          //{url: fullURL},\n          function(data){\n                var s =data.tinyurl;\n                    $(\"#shortenURL\").text(s);\n                    $(\"#click-to-copy\").show();\n                    get_QRCode(s);\n          }\n        ).fail(function(jqXHR, textStatus, errorThrown) { \n            $(\"#error\").show();\n            $(\"#error\").text(\"error: creating short url: is.gd\");\n        });\n}\n\nfunction getVgd()  {\n        var fullURL = $(\"#fullURL\").val().toLowerCase();\n\n        $.getJSON(\n          \"https://urltinyfy.appspot.com/vgd?url=\"+encodeURIComponent(fullURL)+\"&callback=?\",\n          //{url: fullURL},\n          function(data){\n                var s =data.tinyurl;\n                    $(\"#shortenURL\").text(s);\n                    $(\"#click-to-copy\").show();\n                    get_QRCode(s);\n          }\n        ).fail(function(jqXHR, textStatus, errorThrown) { \n            $(\"#error\").show();\n            $(\"#error\").text(\"error: creating short url: v.gd\");\n        });\n}\n\nfunction load() {\n        $(\"#error\").hide();\n        $(\"#error\").addClass(\"isa_error\");        \n        $(\"#click-to-copy\").hide();\n\n        gapi.client.setApiKey('AIzaSyAFPETEhOLJGMLUq9Ql_o3lyJtvJ5IUaqo');\n        gapi.client.load('urlshortener', 'v1', function(){});\n}\nwindow.onload = load;\n    \nfunction get_QRCode(text) {\n    \n    var size = 120;\n    if (!isEmpty(text)) {   \n        jQuery('#qrcode').qrcode({width: size ,height: size ,text: text});\n    }\n}    \n\nfunction isUrl(url) {\n   var strRegex = \"^((https|http|ftp|rtsp|mms)?://)\"\n        + \"?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?\" //ftp的user@\n        + \"(([0-9]{1,3}\\.){3}[0-9]{1,3}\" // IP形式的URL- 199.194.52.184\n        + \"|\" // 允许IP和DOMAIN（域名）\n        + \"([0-9a-z_!~*'()-]+\\.)*\" // 域名- www.\n        + \"([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\\.\" // 二级域名\n        + \"[a-z]{2,6})\" // first level domain- .com or .museum\n        //+ \"(:[0-9]{1,4})?\" // 端口- :80\n        + \"((/?)|\" // a slash isn't required if there is no file name\n        + \"(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$\";\n     var re=new RegExp(strRegex);\n     return re.test(url);\n}\n\nfunction isEmpty(str) {\n    return (!str || 0 === str.length);\n}\n"]}